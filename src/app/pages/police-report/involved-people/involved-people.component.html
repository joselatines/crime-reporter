<div class="bg-white p-6 sm:p-8 rounded-xl shadow-lg space-y-6" [formGroup]="parentForm">
  <h2 class="text-2xl font-bold text-[#202c4c]">Personas Involucradas</h2>

  <div formArrayName="involvedPeople" class="space-y-6">
    <div *ngFor="let person of involvedPeople.controls; let i = index" [formGroupName]="i" class="space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <!-- Nombre -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Nombre</label>
          <input type="text" formControlName="name"
                 class="w-full p-2.5 border border-slate-300 rounded-lg text-slate-900 placeholder:text-slate-400 
                 focus:ring-2 focus:ring-[#202c4c] focus:border-[#202c4c] transition" />
          <div *ngIf="person.get('name')?.invalid && person.get('name')?.touched"
               class="text-red-600 text-sm mt-1">El nombre es requerido</div>
        </div>

        <!-- Cédula -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Cédula</label>
          <input type="text" maxlength="10" formControlName="cedula"
                 class="w-full p-2.5 border border-slate-300 rounded-lg text-slate-900 placeholder:text-slate-400 
                 focus:ring-2 focus:ring-[#202c4c] focus:border-[#202c4c] transition" />
          <div *ngIf="person.get('cedula')?.invalid && person.get('cedula')?.touched"
               class="text-red-600 text-sm mt-1">La cédula es requerida</div>
        </div>

        <!-- Rol -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Rol</label>
          <select formControlName="role"
                  class="w-full p-2.5 border border-slate-300 rounded-lg text-slate-900 
                  focus:ring-2 focus:ring-[#202c4c] focus:border-[#202c4c] transition">
            <option value="testigo">Testigo</option>
            <option value="sospechoso">Sospechoso</option>
            <option value="víctima">Víctima</option>
          </select>
        </div>

        <!-- Edad -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Edad</label>
          <input type="number" formControlName="edad"
                 class="w-full p-2.5 border border-slate-300 rounded-lg text-slate-900 placeholder:text-slate-400 
                 focus:ring-2 focus:ring-[#202c4c] focus:border-[#202c4c] transition" />
        </div>
      </div>

      <!-- Botón Eliminar -->
      <div class="flex justify-end">
        <button type="button" (click)="removePerson(i)"
                class="text-red-600 hover:text-red-700 text-sm font-medium transition-colors">
          Eliminar Persona
        </button>
      </div>
    </div>
  </div>

  <!-- Botón Agregar -->
  <div>
    <button type="button" (click)="onAddPerson()"
            class="mt-2 inline-flex items-center gap-2 bg-[#202c4c] hover:bg-opacity-90 text-white font-semibold 
            px-5 py-2.5 rounded-lg transition-colors shadow-sm">
      <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
      </svg>
      Agregar Persona
    </button>
  </div>
</div>
